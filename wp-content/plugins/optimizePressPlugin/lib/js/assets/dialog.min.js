!function(a){function b(){jb.is(":visible")&&jb.animate({bottom:-490},{duration:400,complete:function(){a(this).hide(),kb.hasClass("help-video")&&kb.html("")}})}function c(a){for(var b,c=a.find("span.content span.title").text(),d=2;5>d;d++)b=O("slide_"+d+"_title").replace(/%element_name%/,c),nb[d].find("div.asset-title:first span.title-text").text(b)}function d(){var b=a(".fancybox-inner").height();a.each(nb,function(){this.height(b)})}function e(b,c){if(c=c||function(){},"Y"==op_assets[b[0]][b[1]].settings)if("undefined"==typeof ob[b[0]]&&(ob[b[0]]={},pb[b[0]]={}),"undefined"==typeof ob[b[0]][b[1]]){var d=OptimizePress[b[0]+"_assets_url"];"core"!=b[0]&&(null!==op_assets[b[0]][b[1]].base_path?d=op_assets[b[0]][b[1]].base_path:d+=b[1]+"/"),a.getScript(d+b[1]+".js",function(){l(b[0],b[1],op_asset_settings),a.object_length(xb)>0?(a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-assets-folder-list",folders:xb},function(d){for(var e in d)for(var f in d[e]){var g=d[e][f];if("image"==e||"style"==e){var h=a("#"+f+"_container"),i=h.closest(".op_asset_browser_slide").attr("id");h.find(".op-asset-dropdown-list").append(g),("op_asset_browser_slide3"==i||"op_asset_browser_slide4"==i)&&R(f+"_container")}else"checkbox"==e&&a(".field-id-"+f+" .checkbox-container").append(g);zb[f]=g}k(b[0],b[1]),c(pb[b[0]][b[1]],ob[b[0]][b[1]]),a("#op_asset_browser_container").find(".op-asset-dropdown-list-item:not(.op-asset-dropdown-list-item--loaded)").find("img").on("load",function(){a(this).parent().addClass("op-asset-img-loaded").parent().addClass("op-asset-dropdown-list-item--loaded"),a(this).off()})},"json"),xb={}):(k(b[0],b[1]),c(pb[b[0]][b[1]],ob[b[0]][b[1]]))})}else"undefined"!=typeof pb[b[0]][b[1]]&&a.each(pb[b[0]][b[1]],function(){this.find(".wp-editor-area").each(function(){var b=a(this).attr("id");tinyMCE.majorVersion>3?(tinyMCE.execCommand("mceAddEditor",!0,b),a(this).val(op_wpautop(a(this).val()))):(a(this).val(op_wpautop(a(this).val())),tinyMCE.execCommand("mceAddControl",!0,b))})}),k(b[0],b[1]),c(pb[b[0]][b[1]],ob[b[0]][b[1]]);else sb?(rb=!1,sb=!1,g(1)):(I("["+b[1]+"]"),a.fancybox.close())}function f(a,b,c){var d='<div class="op-insert-buttons cf">';"boolean"!=typeof b?("undefined"!=typeof b.prev&&(d+='<a href="#'+(c+1)+'" class="op-slide-link">'+O(b.prev)+"</a>"),"undefined"!=typeof b.next&&(d+='<a href="#'+(c+2)+'" class="op-slide-link">'+O(b.next)+"</a>"),("undefined"==typeof b.insert||"boolean"!=typeof b.insert||b.insert!==!1)&&(d+='<a href="#" class="op-bsw-green-button">'+O("Insert")+"</a>")):b===!0&&(d+='<a href="#" class="op-bsw-green-button">'+O("Insert")+"</a>"),d+='</div><div class="clear"></div>',a.append(d)}function g(b,c){var d,e=0,f=0;if(!rb){for(c=c===!1?!1:!0,f=0;b>f;f++)e+=mb[f].outerWidth(!0);d=a(".fancybox-opened").eq(-1),d.find(".op_asset_browser_slide_active").removeClass("op_asset_browser_slide_active"),c?eb.animate({"margin-left":-e+"px"},"slow",function(){d.find(".op_asset_browser_slide").eq(b).addClass("op_asset_browser_slide_active").find(".op_asset_content").addClass("op_no_outline").attr("tabindex",0).focus(),1===j()&&h()}):(eb.css({"margin-left":-e+"px"}),d.find(".op_asset_browser_slide").eq(b).addClass("op_asset_browser_slide_active").find(".op_asset_content").addClass("op_no_outline").attr("tabindex",0).focus(),1===j()&&h())}}function h(){var b,c=j();1===c&&(b=a("#op_asset_browser_slide1").find(".op-last-selected-asset-list-item"),b.length>0?b.focus():a("#op_assets_filter").focus()),2===c&&(b=a("#op_asset_browser_slide2").find(".op-last-selected-asset-dropdown-list-item:visible"),a("#op_asset_browser_slide2").find(".op-last-selected-asset-dropdown-list-item:hidden").removeClass("op-last-selected-asset-dropdown-list-item"),b.length>0?b.removeClass("selected").focus():a(".op-asset-dropdown-list-item:visible").eq(0).find("a").focus())}function j(){var b;return a("#op_asset_browser_slider").find("> li").each(function(c){a(this).hasClass("op_asset_browser_slide_active")&&(b=c)}),b}function k(a,b){_(a,b),Cb=[a,b],o(a,b),db.find(".op_asset_browser_slide .op-settings-"+a+"-"+b).css("display","block")}function l(b,c,d){pb[b][c]=[],ob[b][c]=d,qb[b][c]=[];var e="op-settings-"+b+"-"+c,g="op_assets_"+b+"_"+c+"_",h=d.insert_steps||{},i=d.help_vids||{};if(0==mb[2].find("> ."+e).length){Db={};for(var j=1;4>j;j++){var k="";if("undefined"!=typeof i["step_"+j]&&(k=ab(i["step_"+j])),qb[b][c].push(k),"undefined"==typeof d.attributes["step_"+j])break;var l=a('<div class="'+e+' settings-container"><div class="op-asset-actual-content" />');pb[b][c].push(l),nb[j+1].append(l);var o=l.find(".op-asset-actual-content");for(var p in d.attributes["step_"+j])r.apply(o,[g,p,d.attributes["step_"+j][p],b,c]);L(l),"undefined"!=typeof h[j]&&f(l,h[j],j)}"undefined"!=typeof d.onGenerateComplete&&d.onGenerateComplete(pb[b][c]),a.each(Db,function(b,c){var d=a(b);a.each(c,function(a,b){d.trigger(b)})}),db.find("."+e).on("click",".op-insert-buttons .op-bsw-green-button",function(a){a.preventDefault(),m(db)?u(b,c):n(db)}),B()}}function m(b){var c,d=!0;return b.find(".op-required-input").length>0&&(b.find(".op-multirow-tabs").nextAll(".op-multirow").addClass("op-temp-show"),b.find(".op-required-input").each(function(){var b,e;c=a(this),e=c.hasClass("field-wysiwyg")?!0:!1,isMedia=c.hasClass("field-media")?!0:!1,b=e?".op-wysiwyg:visible .wp-editor-area":isMedia?".op-file-uploader:visible .op-uploader-value":"input:visible, select:visible, textarea:visible",c.find(b).each(function(){var b=e?c.find(".op-wysiwyg:visible .wp-editor-area").attr("id"):"",f=e?tinyMCE.get(b).getContent():a(this).val();f?c.removeClass("op-required-input-error"):(d=!1,c.addClass("op-required-input-error"),e?tinyMCE.majorVersion>3?tinyMCE.get(b).on("change",function(b){b.level.content?a("#"+b.target.id).parentsUntil(".field-wysiwyg").parent().removeClass("op-required-input-error"):a("#"+b.target.id).parentsUntil(".field-wysiwyg").parent().addClass("op-required-input-error")}):tinyMCE.get(b).onChange.add(function(b,c){c.content?a("#"+b.id).parentsUntil(".field-wysiwyg").parent().removeClass("op-required-input-error"):a("#"+b.id).parentsUntil(".field-wysiwyg").parent().addClass("op-required-input-error")}):a(this).off("change blur").on("change blur",function(){var b=a(this).parentsUntil(".op-required-input").parent();b.length<1&&(b=a(this).parent()),a(this).val()?b.removeClass("op-required-input-error"):b.addClass("op-required-input-error")}))})}),b.find(".op-multirow-tabs").nextAll(".op-multirow").removeClass("op-temp-show")),d&&b.find(".op-required-input-error").find("input, select, textarea").off("blur"),d}function n(b){var c,d,e;alert("Please enter all required fields."),c=b.find(".op-required-input-error").eq(0),c.is(":visible")||(d=c.parent(".op-multirow"),0===d.length&&(d=c.parentsUntil(".op-multirow").parent()),d&&(e=d.parent().find(".op-multirow").index(d),b.parentsUntil(".multirow-container").parent().find(".op-multirow-tabs li:eq("+e+") a").trigger("click"))),3!==j()&&g(3,!1),a(".op_asset_browser_slide_active > .op_asset_content").scrollTop(c[0].offsetTop),c.find("input:visible, textarea:visible, select:visible").focus()}function o(a,b){var c=!1;if(rb||sb||(rb=!0,sb=!0,c=!0),"undefined"!=typeof ob[a][b].attributes){var d="op_assets_"+a+"_"+b+"_",e=".field-id-op_assets_"+a+"_"+b+"_";for(var f in ob[a][b].attributes)for(var g in ob[a][b].attributes[f]){var h=ob[a][b].attributes[f][g];p(d+g,e+g,h)}}c&&(rb=!1,sb=!1)}function p(b,c,d){var e=d.type||"";if("tabs"==e)for(var f in d.tabs)for(var g in d.tabs[f].fields)p(b+"_"+f+"_"+g,c+"_"+f+"_"+g,d.tabs[f].fields[g]);else if("column"==e){b=b.replace("_left_column","").replace("_right_column",""),c=c.replace("_left_column","").replace("_right_column","");for(var f in d.elements)p(b+"_"+f,c+"_"+f,d.elements[f])}else if("container"==e){for(var f in d.attributes)p(b+"_"+f,c+"_"+f,d.attributes[f]);a(c+" .panel-controlx").attr("checked",d.default_value).trigger("change")}else if("slider"==e)$slider=a("#"+b),$slider.slider({value:s(d)}),$slider.slider("option","slide").call($slider,{},{value:s(d),id:b}),$slider.slider("option","stop").call($slider,{},{value:s(d),id:b});else if("text_properties"==e)a("#"+b+"_text").val(d.text_default).trigger("keydown"),a("#"+b+"_size").val(d.size_default).trigger("change"),a("#"+b+"_color").val(d.color_default).trigger("keydown"),a("#"+b+"_container a.selected-item").html(a("#"+b+"_container.op-asset-dropdown-list li:first a").html()),a("#op_asset_browser_slide3 .op-settings-"+Cb[0]+"-"+Cb[1]).trigger({type:"update_button_preview",id:b,value:"Default",font_type:"default",tag:Cb[1]}),a(c+" .op-font-style-bold").attr("checked",d.bold_default).trigger("change"),a(c+" .op-font-style-italic").attr("checked",d.italic_default).trigger("change"),a(c+" .op-font-style-underline").attr("checked",d.underline_default).trigger("change");else if("media"==e)V(b,"");else if("multirow"==e)db.find(c+"-multirow-container .op-multirow").remove();else if("style-selector"==e||"image-selector"==e)R(b+"_container",s(d));else if("wysiwyg"==e)Q(b,s(d));else if("font"==e)db.find(c+" > a.reset").trigger("click");else if("checkbox"==e){var h=a(".field-id-"+b+" :checkbox").attr("checked",!1).trigger("change"),i=s(d);"object"==typeof i?a.each(i,function(a,b){h.filter('[value="'+b+'"]').attr("checked",!0).trigger("change")}):i===!0&&h.attr("checked",!0).trigger("change")}else if("radio"==e)a(".field-id-"+b+' :radio[value="'+s(d)+'"]').attr("checked",!0);else{var j=a("#"+b).val(s(d)).trigger("change"),i=j.val();if("undefined"!=typeof d.multirow)for(var k=0;i>k;k++)for(var l in d.multirow.attributes)p(b+"_"+k+"_"+l,c+"_"+k+"_"+l,d.multirow.attributes[l])}}function q(a,b,c){var d=this.append('<div class="panel-control"><input type="checkbox" name="op['+a+'][enabled]" id="'+b+'" value="'+c+'" class="panel-controlx"></div>');d.find(".panel-controlx").iButton({change:function(a){var b=a.closest(".op-bsw-grey-panel"),c=b.find(".op-bsw-grey-panel-content:first"),d=b.find(".show-hide-panel a:first"),e=c.is(":visible"),f=a.is(":checked");e||f!==!0?e&&f===!1&&(c.hide(),d.removeClass("op-bsw-visible")):(c.show(),d.addClass("op-bsw-visible"))}})}function r(b,c,d,e,f,g){if("undefined"==typeof d.skip||1!=d.skip){var h,i=d.type||"input",j=d.help||"",k=d.title||"",g=g||"",l="button_preview"==d.type?"":d.addClass||"",m=d.required?"op-required-input":"",n=b+c,o=d.removeCf||!1,p=a('<div class="field-row field-'+i+" field-id-"+n+" "+g+" "+l+" "+m+" field-"+c+(o?"":" cf")+'" />'),t=this,u=d.prefix||"",v=d.suffix||"";if(u=""==u?"":O(u)+" ",v=""==v?"":" "+O(v),"microcopy"==i)return void t.append('<p class="micro-copy'+(""==l?"":" "+l)+'">'+O(d.text)+"</p>");if("tabs"==i){var z,C=t.append('<div class="field-id-'+n+'-multirow-container multirow-container field-type-tabs cf" />').find(".field-id-"+n+"-multirow-container"),H=n,I=C.append('<ul class="op-multirow-tabs cf" />').find(".op-multirow-tabs");for(var J in d.tabs){I.append('<li><a href="#'+J+'">'+O(d.tabs[J].title)+"</a></li>"),z=C.append('<div class="op-multirow op-multirow-'+J+'" />').find(".op-multirow-"+J);for(var K in d.tabs[J].fields)r.apply(z,[H+"_"+J+"_",K,d.tabs[J].fields[K],e,f]),a("#"+H+"_"+J+"_"+K).val(s(d.tabs[J].fields[K]))}return void I.find("a:first").trigger("click")}if(p.appendTo(this),a.inArray(i,["h1","h2","h3","h4","h5","h6","p"])>-1)p.append("<"+i+">"+O(k)+"</"+i+">");else if("multirow"==i)p.before('<div class="field-id-'+n+'-multirow-container multirow-container cf" />'),h=t.find(".field-id-"+n+"-multirow-container").append(""==k?"":'<label for="'+n+'">'+O(d.title)+"</label>"),p.append('<a href="#" class="new-row">'+O("add_new")+" "+O(d.link_suffix||"")+"</a>"),h.data("op_current_increment",0);else if("column"===i)for(key in d.elements)r.apply(p,[u,b+key,d.elements[key],e,f]);else if("container"===i){var L=p.append('<div class="op-bsw-grey-panel section-'+n+'"><div class="op-bsw-grey-panel-header cf"><h3><a href="#">'+O(d.title)+'</a></h3></div><div class="op-bsw-grey-panel-content op-bsw-grey-panel-no-sidebar cf" id="op_container_content_'+n+'"></div></div>');L.delegate(".op-bsw-grey-panel-header h3 a","click",function(b){b.preventDefault();var c=a(this),d="addClass",e="show",f=c.closest(".op-bsw-grey-panel"),g=f.find(".op-bsw-grey-panel-content:first");g.is(":visible")&&(d="removeClass",e="hide"),c[d]("op-bsw-visible"),g[e]()}),"undefined"!=typeof d.showPanelControl&&!0===d.showPanelControl&&q.apply(L.find(".op-bsw-grey-panel-header"),[n,"panel_control_"+n,"Y"]);var M=L.find("#op_container_content_"+n);for(key in d.attributes)r.apply(M,[u,n+"_"+key,d.attributes[key],e,f]);L.find('input[type!="text"],select').change(function(){var b,c;"checkbox"===a(this).attr("type")?(b=a(this).attr("name"),c=a(this).is(":checked")?1:0):(b=a(this).attr("id"),c=a(this).val()),a("#op_asset_browser_slide3 .op-settings-"+Cb[0]+"-"+Cb[1]).trigger({type:"update_button_preview",value:c,id:b,element_type:this.tagName.toLowerCase(),tag:Cb[1]})}),L.find('input[type="text"]').on("propertychange keydown input paste",function(){a("#op_asset_browser_slide3 .op-settings-"+Cb[0]+"-"+Cb[1]).trigger({type:"update_button_preview",value:a(this).val(),id:a(this).attr("id"),element_type:this.tagName.toLowerCase(),tag:Cb[1]})})}else switch(p.append(""==k?"":'<label for="'+n+'">'+O(d.title)+"</label>"),"undefined"!=typeof d.helpPosition&&"top"==d.helpPosition&&""!=j&&p.append('<p class="micro-copy">'+O(j)+"</p>"),i){case"custom_html":p.append(d.html);break;case"button_preview":p.append('<div class="preview_border preview-wrapper"><div class="preview-outer"><div class="preview-inner preview_border op-asset-dropdown" id="'+n+'_container"><a href="#" tabindex="-1" class="selected-item css-button style-1 pbox_'+d.addClass+'" id="op_button_preview"><span class="text">'+("undefined"!=typeof d.text?d.text:"Placeholder text")+"</span><span"+("undefined"!=typeof d.showSubtext&&d.showSubtext===!1?' style="display:none !important;"':"")+' class="subtext">'+("undefined"!=typeof d.subtext?d.subtext:"Placeholder subtext")+"</span><div"+("undefined"!=typeof d.showGradient&&d.showGradient===!1?' style="display:none !important;"':"")+'  class="gradient"></div><div'+("undefined"!=typeof d.showShine&&d.showShine===!1?' style="display:none !important;"':"")+'  class="shine"></div><div class="hover"></div><div class="active"></div></a>'+F(n,"",d.selectorClass||"")+"</div></div></div>"),"undefined"!=typeof d.folder&&E("image",{fieldid:n,group:e,tag:f,folder:d.folder},d);break;case"media":p.append(a("#op_dummy_media_container").html().replace(/op_dummy_media/g,n)),"undefined"!=typeof d.callback&&a("#"+n).change(d.callback);break;case"wysiwyg":w.apply(p,[n]);break;case"slider":var N="";"undefined"!=typeof d.showOutputElement&&d.showOutputElement===!0&&(N='<div class="slider-output"><span id="output_'+n+'" data-unit="'+d.unit+'">'+("undefined"!=typeof d.default_value?d.default_value:0)+d.unit+"</span></div>"),slider=p.append(u+N+'<div class="slider-item" id="'+n+'" data-min="'+("undefined"!=typeof d.min?d.min:0)+'" data-max="'+("undefined"!=typeof d.max?d.max:0)+'" data-value="'+("undefined"!=typeof d.default_value?d.default_value:0)+'" />'+v),slider.find(".slider-item").slider({min:"undefined"!=typeof d.min?d.min:0,max:"undefined"!=typeof d.max?d.max:0,value:"undefined"!=typeof d.default_value?d.default_value:0,stop:function(b,c){var d;d="undefined"!=typeof c.handle?a(c.handle).parent().attr("id"):c.id,a("#op_asset_browser_slide3 .op-settings-"+Cb[0]+"-"+Cb[1]).trigger({type:"update_button_preview",value:c.value,id:d,element_type:"slider",tag:Cb[1]})},slide:function(b,c){var d;d="undefined"!=typeof c.handle?a(c.handle).parent().attr("id"):c.id;var e=a("#output_"+d);e.length>0&&e.html(c.value+e.attr("data-unit"))}});break;case"color":p.append('<div class="color-picker-container cf">'+u+'<input type="text" value="'+(void 0!=typeof d.default_value?d.default_value:"")+'" id="'+n+'" name="'+n+'" />'+v+'<a href="#" class="op-pick-color hide-if-no-js"></a></div>');break;case"checkbox":var P=d.func||"prepend";p[P]('<div class="checkbox-container">'+A(n,d,i,e,f)+"</div>"),"undefined"!=typeof d.appendTo&&p.delegate(":checkbox","change",function(){var c=a(".field-id-"+b+d.appendTo+" :input"),e=c.val(),f=a(this).val();"undefined"==typeof e&&(e=""),a(this).is(":checked")?e+="|"+f:e=e.replace(new RegExp(f,"g"),""),e=e.replace(new RegExp("^[|]+","g"),""),c.val(e)});break;case"radio":p.append('<div class="checkbox-container">'+A(n,d,i,e,f)+"</div>");break;case"image-selector":"undefined"!=typeof d.folder&&E("image",{fieldid:n,group:e,tag:f,folder:d.folder},d),p.append(G(n,"",d.selectorClass||""));break;case"text_properties":p.append(y(n,d)).find(".selected-item").html(p.find("li a:first").html());break;case"font":p.append(x(n,d)).find(".selected-item").html(p.find("li a:first").html());break;case"style-selector":"undefined"!=typeof d.folder&&E("style",{fieldid:n,group:e,tag:f,folder:d.folder},d),p.append(G(n,"",d.selectorClass||""));break;case"select":p.append(u+'<select name="'+n+'" id="'+n+'">'+A(n,d,i,e,f)+"</select>"+v);break;case"membership_select":p.append(u+'<select name="'+n+'" id="'+n+'">'+A(n,d,i,e,f)+"</select>"+v);break;case"textarea":p.append(u+'<textarea cols="30" rows="10" name="'+n+'" id="'+n+'"></textarea>'+v);break;case"hidden":p.append(u+'<input type="hidden" name="'+n+'" id="'+n+'" value="'+(void 0!=typeof d.default_value?d.default_value:"")+'" />'+v);break;case"paragraph":p.append(u+'<p name="'+n+'" id="'+n+'">'+(void 0!=typeof d.text?d.text:"")+"</p>"+v);break;default:p.append(u+'<input type="text" name="'+n+'" id="'+n+'" />'+v)}if("undefined"!=typeof d.helpPosition&&"top"==d.helpPosition||""==j||p.append('<p class="micro-copy">'+O(j)+"</p>"),"undefined"!=typeof d.events)if("image-selector"!=i&&"style-selector"!=i||"undefined"==typeof d.events.change){var S=typeof d.trigger_events,T=a("#"+n);for(var J in d.events)T.bind(J,pb[e][f],d.events[J]);if("undefined"!=S){S="object"!=S?[d.trigger_events]:d.trigger_events,Db["#"+n]=[];for(var J in S)Db["#"+n].push(S[J])}}else p.delegate("li a","click",function(b){b.preventDefault(),a(this).closest("ul").find("a.selected").removeClass("selected").end().end().addClass("selected");var c=d.events.change(a(this).find("img").attr("alt"),pb[e][f]);c===!1&&b.stopPropagation()});if("undefined"!=typeof d.showOn)if("object"==typeof d.showOn.value){var U=a.extend({},d.showOn);for(var J in d.showOn.value)U.value=d.showOn.value[J],D(e,f,c,U,b),"multirow"==i&&D(e,f,c+"-multirow-container",U,b)}else D(e,f,c,d.showOn,b),"multirow"==i&&D(e,f,c+"-multirow-container",d.showOn,b);if("undefined"!=typeof d.showFields){var V=t.find(".field-id-"+n);C=V.append('<div class="show-fields"/>').find(".show-fields"),H=n;for(var W in d.showFields)r.apply(C,[H+"_",W,d.showFields[W],e,f,"show-field-"+W]);C.find(".field-row").hide(),"image-selector"==i||"style-selector"==i?a("body").on("click","#"+H+"_container .op-asset-dropdown-list a",function(b){b.preventDefault();var c=a(this).find("img").attr("alt");C.find(".field-row").hide().filter(".show-field-"+c).show()}):a("#"+H).change(function(){C.find(".field-row").hide().filter(".show-field-"+a(this).val()).show()})}else if("undefined"!=typeof d.multirow){var C=h,H=n,X=!1;if("undefined"==typeof C&&(C=t.append('<div class="field-id-'+n+'-multirow-container multirow-container cf" />').find(".field-id-"+n+"-multirow-container")),"multirow"==i){var z,u=d.multirow.link_prefix||"",v=d.multirow.link_suffix||"";u=""==u?"":O(u)+" ",v=""==v?"":" "+O(v),remove_row="",remove_row_str='<a href="#" class="remove-row"><img src="'+OptimizePress.imgurl+'remove-row.png" alt="'+O("remove_row")+'" /></a>',a(".field-id-"+H+" a.new-row").click(function(b){var c=C.data("op_current_increment"),g=C.append('<div class="op-multirow cf" />').find(".op-multirow:last");c++,C.data("op_current_increment",c),remove_row=d.multirow.remove_row||"before","before"==remove_row&&g.append(remove_row_str);for(var h in d.multirow.attributes){var i=d.multirow.attributes[h],j=i.type||"";if(r.apply(g,[H+"_"+c+"_",h,i,e,f]),"undefined"!=typeof zb[H+"_"+h]){var k=a("#"+H+"_"+c+"_"+h+"_container");k.find("a.selected-item").html(k.find(".op-asset-dropdown-list").html(zb[H+"_"+h]).find("a:first").html())}if("undefined"!=typeof i.default_value)switch(j){case"style-selector":case"image-selector":R(H+"_"+c+"_"+h+"_container",s(i));break;case"wysiwyg":Q(H+"_"+c+"_"+h,s(i));break;case"paragraph":a("#"+H+"_"+c+"_"+h).html(s(i));break;default:a("#"+H+"_"+c+"_"+h).val(s(i))}}"after"==remove_row&&g.append(remove_row_str),B(),"function"==typeof d.multirow.onAdd&&d.multirow.onAdd.apply(g,[pb[e][f]]),b.preventDefault()}),a(".field-id-"+H+"-multirow-container").delegate("a.remove-row","click",function(b){b.preventDefault();var c,d=a(this).parent();d.hasClass("pricing-table-row")||d.hasClass("op-feature-title-row")?d.remove():(c=a(this).closest(".op-multirow"),c.parent().next().find("a.new-row").focus(),c.remove())});for(var W in d.multirow.attributes)if("undefined"!=typeof d.multirow.attributes[W].folder){var Y=d.multirow.attributes[W].type||"",Z=d.multirow.attributes[W].folder;"style-selector"==Y?E("style",{fieldid:H+"_"+W,group:e,tag:f,folder:Z},d.multirow.attributes[W]):"image-selector"==Y&&E("image",{fieldid:H+"_"+W,group:e,tag:f,folder:Z},d.multirow.attributes[W])}}else{var I=C.append('<ul class="op-multirow-tabs cf" />').find(".op-multirow-tabs");a("#"+n).change(function(){{var b=parseInt(a(this).val()),c=C.find(".op-multirow");I.find("li:visible").length}if(c.length<b){I.find("li").show().addClass("visible");var g,h=d.multirow.link_prefix||"",i=d.multirow.link_suffix||"";h=""==h?"":O(h)+" ",i=""==i?"":" "+O(i);for(var j=c.length;b>j;j++){g=C.append('<div class="op-multirow op-multirow-'+j+' cf" />').find(".op-multirow:last"),I.append('<li class="visible"><a href="#'+j+'">'+h+(j+1)+"</a></li>");for(var k in d.multirow.attributes){var l=d.multirow.attributes[k],m=l.type||"input";if(r.apply(g,[H+"_"+j+"_",k,l,e,f]),"undefined"!=typeof l.default_value)switch(m){case"style-selector":case"image-selector":R(H+"_"+j+"_"+k+"_container",s(l));break;case"wysiwyg":Q(H+"_"+j+"_"+k,s(l));break;case"paragraph":a("#"+H+"_"+j+"_"+k).html(s(l));break;default:a("#"+H+"_"+j+"_"+k).val(s(l))}}X||(B(),X=!0),"function"==typeof d.multirow.onAdd&&d.multirow.onAdd.apply(C,[pb[e][f]])}}else I.find("li").filter(":gt("+(b-1)+")").hide().removeClass("visible").end().filter(":lt("+b+")").show().addClass("visible"),c.hide();c=I.find("li.visible.selected a"),0==c.length&&(c=I.find("li.visible:first a")),c.trigger("click")}).trigger("change")}}}}function s(b){return"undefined"!=typeof b.default_value?a.isFunction(b.default_value)?b.default_value():b.default_value:""}function t(b,c){var d=ob[b][c].attributes,e={},f="op_assets_"+b+"_"+c+"_",g=["h1","h2","h3","h4","h5","h6","p"],h="text";if("undefined"==typeof d)return e;for(var i in d)for(var j in d[i]){var k=d[i][j].type||"";if("column"==k)for(var l in d[i][j].elements){var k=d[i][j].elements[l].type||"";if("container"==k){var m=d[i][j].elements[l].showPanelControl||!1;if(1==m&&a("#panel_control_"+f+l).is(":checked")||0==m){for(var n in d[i][j].elements[l].attributes){var k=d[i][j].elements[l].attributes[n].type||"";if("text_properties"==k){e[n+"_text"]=v(f+l+"_"+n+"_text",{}),e[n+"_size"]=v(f+l+"_"+n+"_size",{}),e[n+"_color"]=v(f+l+"_"+n+"_color",{}),h="subtext_box"===l?"subtext":"text",e[n+"_bold"]=a(".field-id-"+f+l+"_"+n+' input[name="op_font[style_checkbox_'+h+'][bold]"]').is(":checked")?"Y":"",e[n+"_italic"]=a(".field-id-"+f+l+"_"+n+' input[name="op_font[style_checkbox_'+h+'][italic]"]').is(":checked")?"Y":"",e[n+"_underline"]=a(".field-id-"+f+l+"_"+n+' input[name="op_font[style_checkbox_'+h+'][underline]"]').is(":checked")?"Y":"";var o=a("#"+f+l+"_"+n+"_container a.selected-item img");e[n+"_font"]=o.length>0?o.attr("alt")+";"+o.attr("data-type"):""}else"microcopy"!=k&&"custom_html"!=k&&a.inArray(k,g)<0&&(e[n]=v(f+l+"_"+n,d[i][j].elements[l].attributes[n]))}e[l+"_panel"]="Y"}else e[l+"_panel"]="N"}else"microcopy"!=k&&"custom_html"!=k&&a.inArray(k,g)<0&&(e[l]=v(f+j,d[i][j].elements[l]))}else if("container"==k)for(var l in d[i][j].attributes){var k=d[i][j].attributes[l].type||"";"microcopy"!=k&&"custom_html"!=k&&a.inArray(k,g)<0&&(e[l]=v(f+j+"_"+l,d[i][j].attributes[l]))}else"microcopy"!=k&&"custom_html"!=k&&a.inArray(k,g)<0&&(e[j]=v(f+j,d[i][j]))}return e}function u(b,c){if(sb)return!1;var d=["h1","h2","h3","h4","h5","h6","p"];if("undefined"!=typeof ob[b][c]){var e="op_assets_"+b+"_"+c+"_";if("function"==typeof ob[b][c].customInsert){var f=t(b,c);ob[b][c].customInsert(f)}else{var g="",h="",i=!1;if("undefined"!=typeof ob[b][c].attributes)for(var j in ob[b][c].attributes)for(var k in ob[b][c].attributes[j]){var l=ob[b][c].attributes[j][k].type||"";if("microcopy"!=l&&"custom_html"!=l&&a.inArray(l,d)<0){var m=ob[b][c].attributes[j][k],n=v(e+k,m),o=!0;if("object"==typeof n)for(var p in n)g+=(""==g?"":" ")+k+"_"+p+'="'+encodeURIComponent(n[p])+'"';else if("undefined"==typeof m.exclude||m.exclude!==!0){if("undefined"!=typeof m.showOn){o=!1;var q=m.showOn.field.split("."),r=v(e+q[1],ob[b][c].attributes[q[0]][q[1]]);if("object"==typeof m.showOn.value){for(var p in m.showOn.value)if(r==m.showOn.value[p]){o=!0;break}}else r==m.showOn.value&&(o=!0)}o&&("content"==k?(i=!0,""==n&&(n=" "),h=n):""!=n&&("undefined"!=typeof m.attr&&(k=m.attr),g+=(""==g?"":" ")+k+'="'+encodeURIComponent(n)+'"'))}}}var s="["+c+(""==g?"":" ")+g+"]";i&&(s+=h+"[/"+c+"]"),s+="",wpActiveEditor=wpActiveEditor||"content",I(s),a.fancybox.close()}}return!0}function v(b,c){var d=c.type||"input";if("undefined"!=typeof c.multirow){if(el=a(".field-id-"+b+"-multirow-container"),"multirow"==d){var e=[];el.find(".op-multirow, .op-feature-title-row").each(function(){var b=a(this),d={};for(var f in c.multirow.attributes){var g,h=c.multirow.attributes[f].type||"";"style-selector"==h||"image-selector"==h?(g=b.find('div[id$="_'+f+'_container"]').attr("id"),g=g.substring(0,g.length-10)):g=b.find(':input[id$="_'+f+'"]').attr("id"),d[f]=v(g,c.multirow.attributes[f])}e.push(d)})}else for(var e={total:v(b,{type:c.type}),rows:[]},f=0;f<e.total;f++){var g={};for(var h in c.multirow.attributes)g[h]=v(b+"_"+f+"_"+h,c.multirow.attributes[h]);e.rows.push(g)}return e}if("tabs"==d){var i={};for(var f in c.tabs){i[f]={};for(var j in c.tabs[f].fields)if(i[f][j]={},"column"==c.tabs[f].fields[j].type)for(var k in c.tabs[f].fields[j].elements){var d=c.tabs[f].fields[j].elements[k].type||"";if("container"==d){var l=c.tabs[f].fields[j].elements[k].showPanelControl||!1;if(1==l&&a("#panel_control_"+b+"_"+f+"_"+k).is(":checked")||0==l){for(var m in c.tabs[f].fields[j].elements[k].attributes){var d=c.tabs[f].fields[j].elements[k].attributes[m].type||"";if("text_properties"==d){i[f][j][m+"_text"]=v(b+"_"+f+"_"+k+"_"+m+"_text",{}),i[f][j][m+"_size"]=v(b+"_"+f+"_"+k+"_"+m+"_size",{}),i[f][j][m+"_color"]=v(b+"_"+f+"_"+k+"_"+m+"_color",{}),i[f][j][m+"_bold"]=a(".field-id-"+b+"_"+f+"_"+k+"_"+m+' input[name="op_font[style_checkbox_text][bold]"]').is(":checked")?"Y":"",i[f][j][m+"_italic"]=a(".field-id-"+b+"_"+f+"_"+k+"_"+m+' input[name="op_font[style_checkbox_text][italic]"]').is(":checked")?"Y":"",i[f][j][m+"_underline"]=a(".field-id-"+b+"_"+f+"_"+k+"_"+m+' input[name="op_font[style_checkbox_text][underline]"]').is(":checked")?"Y":"";var n=a("#"+b+"_"+f+"_"+k+"_"+m+"_container a.selected-item img");i[f][j][m+"_font"]=n.length>0?n.attr("alt")+";"+n.attr("data-type"):""}else"microcopy"!=d&&"custom_html"!=d&&(i[f][j][m]=v(b+"_"+f+"_"+k+"_"+m,c.tabs[f].fields[j].elements[k].attributes[m]))}i[f][j][k+"_panel"]="Y"}else i[f][j][k+"_panel"]="N"}else"microcopy"!=d&&"custom_html"!=d&&(i[f][j][k]=v(b+"_"+j,c.tabs[f].fields[j].elements[k]))}else i[f][j]=v(b+"_"+f+"_"+j,c.tabs[f].fields[j])}return i}var o;switch(d){case"slider":o=a("#"+b).slider("value");break;case"text_properties":break;case"font":var p=a(".field-id-"+b),q={size:["select:first","val"],font:[".op-asset-dropdown a:first img","attr","alt"],style:['select[name$="[style]"]',"val"],color:[".color-picker-container :input","val"],spacing:['select[name$="[spacing]"]',"val"],shadow:['select[name$="[shadow]"]',"val"]};o={},"undefined"!=typeof c.size_text&&(q.size[0]=':input[name$="[size]"]');for(var f in q){var r=a(q[f][0],p),s="";r.length>0&&(s="undefined"!=typeof q[f][2]?r[q[f][1]](q[f][2]):r[q[f][1]]()),""!=s&&(o[f]=s)}break;case"image-selector":case"style-selector":o=S(b+"_container");break;case"checkbox":o=a("#"+b).is(":checked")?"Y":"";break;case"radio":o=a(".field-id-"+b+" :radio:checked").val();break;case"textarea":var t=c.format||"op_unautop";o=a("#"+b).val(),o="custom"===t?o:"br"==t?Z(o):op_wpautop(o);break;case"wysiwyg":o=P(b);break;case"paragraph":o=a("#"+b).html();break;default:o=a("#"+b).val()}if("undefined"!=typeof c.showFields){var u={value:o,fields:{}};for(var h in c.showFields)u.value==h&&(u.fields[h]=v(b+"_"+h,c.showFields[h]));return u}return o}function w(b,c){var d,e,f;if(ub){if(c=c||"",a("#qt_"+b+"_toolbar").remove(),d=a("#op_dummy_wysiwyg").html().replace(/opassetswysiwyg/gi,b),e=a(d),e.find("#qt_"+b+"_toolbar").remove(),a("#"+b+"_tbl").remove(),this.append('<div class="op-wysiwyg"><div id="wp-'+b+'-wrap" class="wp-core-ui wp-editor-wrap tmce-active">'+e.html()+"</div></div>"),a("#qt_"+b+"_toolbar").remove(),tinyMCEPreInit.mceInit[b]=tinyMCEPreInit.mceInit.opassetswysiwyg,"function"==typeof QTags){var g={};g="undefined"!=typeof tinyMCEPreInit.qtInit.opassetswysiwyg?tinyMCEPreInit.qtInit.opassetswysiwyg:tinyMCEPreInit.qtInit.content,g.id=b;try{quicktags(g),QTags._buttonsInit()}catch(h){throw new Error("Error initializing quickatags.")}}tinyMCE.majorVersion>3?(tinyMCE.execCommand("mceRemoveEditor",!0,b),tinymce.execCommand("mceRemoveEditor",!0,b),a("#"+b+"_tbl").remove(),a("#"+b).css({display:"block",height:"100px"}),f=a("#qt_"+b+"_toolbar").prev(),f.hasClass("mce-panel")&&f.remove(),window.op_tinymce_initialized||tinyMCE.execCommand("mceAddEditor",!1,b)):(tinyMCE.execCommand("mceRemoveControl",!0,b),a("#"+b+"_tbl").remove(),a("#"+b).css({display:"block",height:"100px"})),a(".op-live-editor").length>0&&(tinyMCE.majorVersion>3?(tinyMCE.execCommand("mceAddEditor",!0,b),a("#"+b).css({height:"100px"})):(tinyMCE.execCommand("mceAddControl",!0,b),a("#"+b).css({height:"100px"})))}else this.append('<textarea cols="30" rows="10" id="'+b+'" name="'+b+'" />')}function x(b,c){var d,e={size:"",font:".font-dropdown",style:"",spacing:"",shadow:""},f="",g=c.disable||{};for(var h in e)"undefined"==typeof Ab[h]&&(d=a("#op_font"+h),""!=e[h]&&(d=d.find(e[h])),Ab[h]=d.html());return"undefined"==typeof g.size&&(f+="undefined"!=typeof c.size_text?'<input type="text" name="'+b+'[size]" id="'+b+'_size" />px':'<select name="'+b+'[size]" id="'+b+'_size">'+Ab.size+"</select>"),"undefined"==typeof g.font&&(f+=G(b,Ab.font,"font-view")),"undefined"==typeof g.style&&(f+='<select name="'+b+'[style]" id="'+b+'_style">'+Ab.style+"</select>"),"undefined"==typeof g.color&&(f+='<div class="color-picker-container cf"><input type="text" value="" id="'+b+'_color" name="'+b+'[color]" /><a href="#" class="op-pick-color hide-if-no-js"></a></div>'),"undefined"==typeof g.spacing&&(f+='<select name="'+b+'[spacing]" id="'+b+'_spacing">'+Ab.spacing+"</select>"),"undefined"==typeof g.shadow&&(f+='<select name="'+b+'[shadow]" id="'+b+'_shadow">'+Ab.shadow+"</select>"),""!=f?f='<div class="op-typeography font-chooser cf">'+f+'</div><a href="#reset-font" class="reset">'+O("reset")+"</a>":""}function y(b,c){var d,e={size:"",font:".font-dropdown",style_checkbox_text:"",style_checkbox_subtext:""},f="";if("op_assets_core_button_text_box_text_properties_1"===b||"op_assets_core_membership_order_button_text_box_text_properties_1"===b||"op_assets_core_membership_order_button_text_box_text_properties_1"===b||"op_assets_core_op_popup_text_box_text_properties_1"===b||"op_assets_core_optin_box_tabs_submit_button_text_box_text_properties_1"===b||"op_assets_core_optin_modal_tabs_submit_button_text_box_text_properties_1"===b)var g="style_checkbox_text";else var g="style_checkbox_subtext";
for(var h in e)"undefined"==typeof Ab[h]&&(d=a("#op_font"+h),""!=e[h]&&(d=d.find(e[h])),Ab[h]=d.html());return f+='<input type="text" name="'+b+'[text]" id="'+b+'_text" value="'+("undefined"!=typeof c.text_default?c.text_default:"")+'" />',f+="undefined"!=typeof c.size_text?'<input type="text" name="'+b+'[size]" id="'+b+'_size" />px':'<select name="'+b+'[size]" id="'+b+'_size">'+Ab.size+"</select>",f+=G(b,Ab.font,"font-view"),f+='<div class="color-picker-container cf"><input type="text" value="" id="'+b+'_color" name="'+b+'[color]" /><a href="#" class="op-pick-color hide-if-no-js"></a></div>',f+='<div class="style-checkbox-selector cf">'+Ab[g]+"</div>"}function z(a,b,c,d,e,f){var g="";switch(f=f||!1,d=d||"",e=e||!1,a){case"checkbox":g='<input type="checkbox" name="'+b+(f?'" id="'+b+'"':'[]"')+' value="'+c+'"'+(e?' checked="checked"':"")+" />",""!=d&&(g="<label>"+g+" "+d+"</label>");break;case"radio":g='<input type="radio" name="'+b+'[]" value="'+c+'"'+(e?' checked="checked"':"")+" />",""!=d&&(g="<label>"+g+" "+d+"</label>");break;case"select":g='<option value="'+c+'"'+(e?' selected="selected"':"")+">"+d+"</option>";break;case"membership_select":if(""!=c){var h=c.split("-");c=h[1],classStr=h[0]}else classStr="",c="";g='<option class="parent-'+classStr+'" value="'+c+'"'+(e?' selected="selected"':"")+">"+d+"</option>"}return g}function A(a,b,c,d,e){var f="",g=s(b);if("undefined"!=typeof b.folder)E(c,{fieldid:a,group:d,tag:e,folder:b.folder},b);else if("undefined"!=typeof b.valueRange){var h=b.valueRange.finish+1,i=b.valueRange.text_prefix||"",j=b.valueRange.text_suffix||"";i=""==i?"":O(i)+" ",j=""==j?"":" "+O(j);for(var k=b.valueRange.start;h>k;k++)f+=z(c,a,k,i+k+j,g==k)}else if("undefined"!=typeof b.values)for(var l in b.values)f+=z(c,a,l,O(b.values[l]),g==l);else f+=z(c,a,"Y","","Y"==g,!0);return f}function B(){for(var b in yb){var c=db.find("."+b),d=[];for(var e in yb[b]){var f=yb[b][e];"image-selector"==f.type||"style-selector"==f.type||"button_preview"==f.type?(a("#"+e+"_container").data({show_on_values:f.values}),a("#"+e+"_container").on("click",".op-asset-dropdown-list a",function(b){b.preventDefault(),C.apply(c,[a(this).find("img").attr("alt"),a(this).closest(".op-asset-dropdown").data("show_on_values")])})):(d.push("#"+e),c.find("#"+e).data({show_on_values:f.values}).change(function(){C.apply(c,[a(this).val(),a(this).data("show_on_values")])}).trigger("change"))}}yb={}}function C(b,c){var d,e,f,g,h,i=this,j="",k={},l=[],m=0;for(f in c){for(d=[],e=[],m=0;m<c[f].length;m+=1)d.push(c[f][m].selector),e.push(c[f][m].displayType);l.push(d);var n=d.join(",");f==b?(j=n,g=d,h=e):"undefined"==typeof k[n]&&(k[n]=!0,i.find(n).css("display","none"))}if(""!=j)for(a(j).css("display","block").find(":input").trigger("change"),m=0;m<g.length;m+=1)a(g[m]).css("display",h[m]).find(":input").trigger("change")}function D(a,b,c,d,e){var f="op-settings-"+a+"-"+b,g=d.field.split("."),h=g[g.length-1];if(h="undefined"!=typeof d.idprefix?d.idprefix+h:e+h,"undefined"==typeof yb[f]&&(yb[f]={}),"undefined"==typeof yb[f][h]){yb[f][h]={values:{}};for(var i=ob[a][b].attributes,j=0,k=g.length;k>j;j++)i=i[g[j]];yb[f][h].type="undefined"!=typeof d.type?d.type:i.type||"input"}"undefined"==typeof yb[f][h].values[d.value]&&(yb[f][h].values[d.value]=[]),yb[f][h].values[d.value].push({selector:".field-id-"+e+c,displayType:d.displayType||"block"})}function E(a,b,c){"undefined"!=typeof c.asset&&(b.group=c.asset[0],b.tag=c.asset[1]),"undefined"!=typeof c.ignore_vals&&(b.ignore_vals=c.ignore_vals),"undefined"==typeof xb[a]&&(xb[a]=[]),xb[a].push(b)}function F(a,b){return b=b||"",'<div class="op-asset-dropdown-list">'+b+"</div>"}function G(a,b,c){return b=b||"",""!=c&&(Eb[c]=!0),'<div class="op-asset-dropdown'+(""==b?" loading-asset-dropdown":"")+" "+c+'" id="'+a+'_container"><a class="selected-item" href="#"></a><div class="op-asset-dropdown-list">'+b+"</div></div>"}function H(){0==a("#op-color-picker").length&&a("body").append('<div id="op-color-picker" />'),ib=a("#op-color-picker"),hb=a.farbtastic("#op-color-picker",M),db.on("focus",".color-picker-container :input",function(){$cp_link="undefined"==typeof a(this).data("cp_link")?a(this).siblings("a.op-pick-color"):a(this).data("cp_link"),a(this).data("cp_link",$cp_link),$cp_link.trigger("click")}).on("blur",".color-picker-container :input",function(){var b=a(this),c=N(b.val());c="#"===c?"":c,gb&&gb[1]&&M(c),ib.hide()}).on("change",".color-picker-container :input",function(){var b=a(this),c=N(b.val());$cp_link="undefined"==typeof b.data("cp_link")?a(this).siblings("a.op-pick-color"):b.data("cp_link"),a(this).data("cp_link",$cp_link),$cp_link.css("background-color","#"==c?"transparent":c),ib.is(":visible")&&"#"!=c&&hb.setColor(c)}),db.on("click","a.op-pick-color",function(b){$input="undefined"==typeof a(this).data("input")?a(this).prev("input"):a(this).data("input"),a(this).data("input",$input),gb=[a(this),$input],M(gb[1].val()),ib.position({of:gb[0],my:"left top",at:"left bottom"}).show(),b.preventDefault()})}function I(a){"undefined"!=typeof op_le_insert_content?op_le_insert_content(a):send_to_editor(a+"<br /><br />")}function J(b,c,d){if("function"==typeof d.customSettings)d.customSettings(b,c);else for(var e="op_assets_"+b.asset[0]+"_"+b.asset[1]+"_",f=b.attrs||{},g=1;4>g;g++)if("undefined"!=typeof d.attributes["step_"+g])for(var h in d.attributes["step_"+g]){var i=d.attributes["step_"+g][h],j=i.type||"input",k=f[h]||"";switch(k=op_decodeURIComponent(k),j){case"multirow":if(k=b[h]||"","object"==typeof k)for(var l,m=c[g-1].find(".field-id-"+e+h+" a.new-row"),n=c[g-1].find(".field-id-"+e+h+"-multirow-container"),o=0,p=k.length;p>o;o++)m.trigger("click"),l=n.find("> .op-multirow:last"),a.each(i.multirow.attributes,function(a,b){var c=k[o].attrs[a]||"";"textarea"==(b.type||"input")&&(c=op_unautop(c)),c=op_decodeURIComponent(c),l.find(':input[name$="'+a+'"]').val(c)});break;case"style-selector":case"image-selector":R(e+h+"_container",k);break;case"checkbox":a("#"+e+h).attr("checked","Y"==k).trigger("change");break;case"radio":a(".field-id-"+e+h+' :radio[value="'+k+'"]').attr("checked",!0).trigger("change");break;case"font":U(h,f,e+h);break;case"wysiwyg":Q(e+h,k);break;case"textarea":var q=i.format||"op_unautop";a("#"+e+h).val("custom"===q?k:"br"==q?$(k):op_unautop(k));break;case"media":V(e+h,k);break;case"paragraph":"string"==typeof k&&""!=k&&a("#"+e+h).html(k).trigger("change");break;default:a("#"+e+h).val(k).trigger("change")}}}function K(b){var d=b.asset;db.addClass("edit-mode"),rb=!0,sb=!0,"undefined"!=typeof op_assets[d[0]]&&"undefined"!=typeof op_assets[d[0]][d[1]]&&(c(mb[1].find('a[href$="#'+d[0]+"/"+d[1]+'"]')),db.find(".op_asset_browser_slide .settings-container").css("display","none"),e(d,function(c,d){J(b,c,d),sb=!1,rb=!1,"undefined"!=typeof d.default_slide?g(a.isFunction(d.default_slide)?d.default_slide(c):d.default_slide):"undefined"!=typeof c[1]?g(3,!1):g(2,!1)}))}function L(b){a(".color-picker-container :input",b).each(function(){var b=a(this).siblings("a.op-pick-color");b.data("input",a(this)),a(this).data("cp_link",b).data("cp_link").css("background-color",N(a(this).val()))})}function M(b){hb.setColor(b),gb[1].val(b),gb[0].css("background-color",b),a("#op_asset_browser_slide3 .op-settings-"+Cb[0]+"-"+Cb[1]).trigger({type:"update_button_preview",id:gb[1].attr("id"),value:b,tag:Cb[1]})}function N(a){return"#"+a.replace(/[^a-fA-F0-9]/,"")}function O(a){return a&&"string"==typeof a?op_assets_lang[a]||a.replace(/{\#([^}]+)\}/g,function(a,b){return op_assets_lang[b]||"{#"+b+"}"}):""}function P(b){var c="";if(ub){var d=tinyMCE.get(b);c=d&&d.isHidden()||!d?op_wpautop(a("#"+b).val()):d.getContent()}else c=a("#"+b).val();return c=wb?op_wpautop(c):op_unautop(c)}function Q(b,c){if(ub){a("#wp-"+b+"-wrap").removeClass("html-active").addClass("tmce-active");var d=tinyMCE.get(b);d?d.setContent(op_wpautop(c),{no_events:!0}):(0===a(".op-live-editor").length&&switchEditors.go(b,"tmce"),a("#"+b).val(op_unautop(c)))}else a("#"+b).val(op_unautop(c))}function R(b,c){if("op_assets_core_button_button_preview_container"!=b&&"op_assets_core_membership_order_button_button_preview_container"!=b&&"op_assets_core_optin_box_tabs_submit_button_button_preview_container"!=b&&"op_assets_core_optin_modal_tabs_submit_button_button_preview_container"!=b&&"op_assets_core_op_popup_button_preview_container"!=b){c="undefined"!=typeof c?c:"";var d=a("#"+b),e=d.parent(),f=e.hasClass("op-disable-selected"),g=d.data("show_on_values");""==c?f?(d.find(".selected").removeClass("selected"),c=null):c=a("#"+b+" a.selected-item").html(a("#"+b+" .op-asset-dropdown-list a:first").html()).find("img").attr("alt"):f?d.find(".selected").removeClass("selected").end().find('img[alt="'+c+'"]').parent().trigger("click"):d.find("a.selected-item").html(d.find('img[alt="'+c+'"]').parent().html()),"undefined"!=typeof g&&null!==c&&C.apply(d.closest(".op_asset_browser_slide"),[c,g])}}function S(b){var c=a("#"+b);return c=c.find(c.closest(".field-row").hasClass("op-disable-selected")?".selected img":".selected-item img"),c.attr("alt")}function T(b,c){a("#"+b).val(c).next("a.op-pick-color").css({backgroundColor:c})}function U(b,c,d){var e=["size","font","style","color","spacing","shadow"];a.each(e,function(e,f){var g=b+"_"+f,h=c[g]||"";h=op_decodeURIComponent(h),"font"==f?R(d+"_container",h):a("#"+d+"_"+f).val(h).trigger("change")})}function V(b,c,d){d=d===!1?!1:!0;var e=a("#"+b),f=e.next().find(".content");if("undefined"==typeof c||""==c)return f.html(""),e.val(""),void(d&&e.trigger("change"));var g=c.match(/\.([^.]+)$/);e.val(c),d&&e.trigger("change"),g=null===g?!1:g[1],f.html(a.inArray(g,["jpg","jpeg","gif","png"])>-1?'<a href="'+c+'" target="_blank" class="preview-image"><img src="'+c+'" alt="uploaded-image" /></a><a href="#remove" class="remove-file">'+O("remove_image")+"</a>":'<a href="'+c+'" target="_blank" class="preview-image">'+O("view_file")+'</a><a href="#remove" class="remove-file">'+O("remove_file")+"</a>")}function W(a){return a=a||"","undefined"!=typeof op_le_column_width?op_le_column_width():a}function X(){ub&&tb!==!0&&(tb=!0,vb&&"string"!=typeof this.content&&this.content.find(".wp-editor-area").each(function(){var b=a(this).attr("id"),c=tinyMCE.get(b);c&&"opassetswysiwyg"!=b&&(tinyMCE.execCommand("mceFocus",!1,b),tinyMCE.majorVersion>3?tinyMCE.execCommand("mceRemoveEditor",!1,b):tinyMCE.execCommand("mceRemoveControl",!1,b))}))}function Y(b){var c=a("#op_asset_browser_slider");b=0===b?0:1,a.fancybox.open({type:"inline",scrolling:"no",autoSize:!1,fitToView:!1,helpers:{overlay:{closeClick:!1}},keys:!1,margin:0,padding:0,width:760,height:500,minHeight:500,maxHeight:500,href:"#op_asset_browser_container",beforeClose:X,beforeLoad:function(){a("#op_asset_browser_container").css({position:"fixed",top:0,height:"100%",bottom:0})},beforeShow:function(){d(),g(b,!1),c.css({display:"none"}),a("html").css({overflow:"hidden",height:"100%"}),a(window.parent.document).find(".fancybox-close").css({display:"none"})},afterShow:function(){var d;a("#op_asset_browser_container").css({position:"static",top:"auto"}).find(".op_asset_content").css({height:"100%"}),c.css({display:"block"}),$fancyBoxOpened=a(".fancybox-opened").eq(-1),$fancyBoxIframe=$fancyBoxOpened.find("iframe"),$fancyBoxIframe.length>0?$fancyBoxIframe.focus():(d=$fancyBoxOpened.find("#op_asset_browser_container"),d.length>0?($fancyBoxOpened.find(".op_asset_browser_slide").eq(b).addClass("op_asset_browser_slide_active").find(".op_asset_content").addClass("op_no_outline").attr("tabindex",0).focus(),h()):$fancyBoxOpened.find(".fancybox-inner").addClass("op_no_outline").attr("tabindex",0).focus())},afterClose:function(){tb=!1,g(1),db.find(".multirow-container:not(.field-type-tabs)").find(".op-multirow-tabs li").remove().end().find(".op-multirow").remove(),a("#op_asset_browser_slider .op_asset_browser_slide_active").removeClass("op_asset_browser_slide_active"),a("html").css({overflow:"auto",height:"auto"}),a(window.parent.document).find(".fancybox-close").css({display:"block"})}})}function Z(a){return a=a.replace(/(\r\n|\n)/g,"<br />")}function $(a){return a=a.replace(/<br\s*\/?>/g,"\n",a)}function _(a,b){var c,d,e=qb[a][b];for(i=0;3>i;i++)c=e[i],d=nb[i+2].find(".help-vid-link"),d.html(""!=c?c:qb.defaults[i])}function ab(a){var b="{'playlist':[{'autoPlay':true,'autoBuffering':true,'url':'"+a.url.split("/").join("\\/")+"'}],'plugins':{'controls':{'url':'"+OptimizePress.flowplayer_control.split("/").join("\\/")+"'}}}";return'<a href="'+OptimizePress.flowplayer+"?config="+b+'" title="'+O("help_video")+'" tabindex="-1" class="help-me"><span>?</span></a> <div>     <input type="hidden" name="help_vid_width[]" value="'+a.width+'" class="help_vid_width" />     <input type="hidden" name="help_vid_height[]" value="'+a.height+'" class="help_vid_height" /> </div>'}function bb(){Eb["help-video"]=!0,db.delegate("a.help-me","click",function(b){b.preventDefault();var c=a(this),d=c.next(),e=d.find(".help_vid_width").val(),f=d.find(".help_vid_height").val();b.preventDefault();for(var g in Eb)kb.removeClass(g);kb.addClass("help-video");var h='<div style="width:{width}px;height:{height}px;margin:0 auto"><object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="transparent" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{href}" /><embed src="{href}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="transparent"></embed></object></div>'.replace(/\{width\}/g,e).replace(/\{height\}/g,f).replace(/\{href\}/g,c.attr("href"));kb.html(h),jb.show().animate({bottom:0},400)})}function cb(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}var db,eb,fb,gb,hb,ib,jb,kb,lb,mb=[],nb=[],ob={core:{},addon:{},theme:{}},pb={core:{},addon:{},theme:{}},qb={defaults:[],core:{},addon:{},theme:{}},rb=!1,sb=!1,tb=!1,ub=!1,vb=!1,wb=!1,xb={},yb={},zb={},Ab={},Bb="",Cb=[],Db={},Eb={};a(document).ready(function(){var d,f,i,k,l,m,n=0;for("undefined"!=typeof switchEditors&&(vb=!0),ub="undefined"!=typeof tinyMCE,wb="undefined"!=typeof pagenow,db=a("#op_asset_browser_container"),eb=a("#op_asset_browser_slider"),fb=a("#op_assets_waiting"),n=0;5>n;n++)mb.push(a("#op_asset_browser_slide"+n)),nb.push(mb[n].find(".op_asset_content"));for(d=nb[1].find("div.asset-list"),f=d.parent(),i=a("#op_asset_browser_no_assets"),k=function(b,c){var e,c=c,f=a.trim(c.val()),g=d.find("li");f&&""!==f?(f=f.toLowerCase(),m=!1,e=g.find("span.title"),e.each(function(){var b=a(this),c=b.text().toLowerCase(),d=c.indexOf(f)>-1,e="hidden",g="visible",h="hide";d&&(m=!0,e="visible",g="hidden",h="fadeIn",h="show"),b.closest("li").filter(d?":not(:visible)":":visible").addClass(e).removeClass(g).stop()[h]()}),m||e.each(function(){var b,c,d,e=a(this),g=e.text().toLowerCase(),h=!0;for(b=f.split(" "),c=b.length,d=0;c>d;d+=1)if(g.indexOf(b[d])<0){h=!1;break}h&&(m=!0,e.closest("li").addClass("visible").removeClass("hidden").stop().show())}),m?(d.show(),i.hide(),d.find("a:visible").length<=0&&(d.hide(),i.show())):(d.hide(),i.show())):(d.show(),g.filter(":not(:visible)").show(),i.hide())},a("#op_assets_filter").keydown(function(){clearTimeout(l)}).keyup(function(b){var c=a(this);l=setTimeout(function(){k(b,c)},60)}).change(function(){a(this).trigger("keyup")}),a("#op-insert-asset").click(function(a){OP.previousWpActiveEditor=wpActiveEditor,a.preventDefault(),Y()}),H(),a(".asset-list a",mb[1]).click(function(b){db.removeClass("edit-mode"),b.preventDefault();var d=a(this),f=a(this).get_hash();Bb=f,f=f.split("/"),2==f.length&&(db.find(".op_asset_browser_slide .settings-container").css("display","none"),"undefined"!=typeof op_assets[f[0]]&&"undefined"!=typeof op_assets[f[0]][f[1]]&&(e(f),c(d),g(2)))}),a(window).on("keydown",function(b){var c,d=a(document.activeElement),e=j(),f=5,i=0;switch(b.which){case 83:case 111:case 55:if(d.is("#op_assets_filter")||1!==j())return;b.preventDefault(),a("#op_assets_filter").focus();break;case 900:3===e||4===e||2===e&&a("#op_asset_browser_slide2").find(".op-settings-core-custom_html").is(":visible")||2===e&&a("#op_asset_browser_slide2").find(".op-settings-core-img_alert").is(":visible")||2===e&&a("#op_asset_browser_slide2").find(".op-settings-core-javascript").is(":visible")||2===e&&a("#op_asset_browser_slide2").find(".op-settings-core-vertical_spacing").is(":visible")?(!d.hasClass("op-bsw-green-button")||d.next().is("a")||b.shiftKey||b.preventDefault(),b.shiftKey&&d.is(".op_asset_content.op_no_outline")&&b.preventDefault()):((1===e||2===e)&&(c=a.Event("keydown"),c.which=b.shiftKey?38:40,a(window).trigger(c)),b.preventDefault());break;case 27:e>1&&a(".fancybox-opened").eq(-1).find(".op_asset_browser_slide_active").find(".op_asset_content").focus();break;case 33:if(1===e||2===e){for(c=a.Event("keydown"),c.which=38,i=0;f>i;i+=1)a(window).trigger(c);b.preventDefault()}break;case 34:if(1===e||2===e){for(c=a.Event("keydown"),c.which=40,i=0;f>i;i+=1)a(window).trigger(c);b.preventDefault()}break;case 40:1===e&&(b.preventDefault(),d.parent().is(".op-asset-list-item")&&d.parent().nextAll(".op-asset-list-item:visible").length>0?d.removeClass("op-last-selected-asset-list-item selected").parent().nextAll(".op-asset-list-item:visible").eq(0).find("a").addClass("op-last-selected-asset-list-item").focus():d.is("#op_assets_filter")?a(".asset-list .op-asset-list-item:visible").eq(0).find("a").focus():h()),2===e&&(d.is("textarea")||d.is("input")||b.preventDefault(),d.parent().is(".op-asset-dropdown-list-item:visible")&&d.parent().next(".op-asset-dropdown-list-item:visible").length>0?d.removeClass("op-last-selected-asset-dropdown-list-item selected").parent().next(".op-asset-dropdown-list-item").find("a").addClass("op-last-selected-asset-dropdown-list-item").focus():d.is("#op_assets_filter")?a(".op-asset-dropdown-list-item:visible").eq(0).find("a").focus():h());break;case 38:if(1===e){if(b.preventDefault(),d.is("#op_assets_filter"))return;d.parent().is(".op-asset-list-item")&&d.parent().prevAll(".op-asset-list-item:visible").length>0?d.removeClass("op-last-selected-asset-list-item").parent().prevAll(".op-asset-list-item:visible").eq(0).find("a").addClass("op-last-selected-asset-list-item").focus():d.parent().is(".op-asset-list-item")?a("#op_assets_filter").focus():h()}2===e&&(d.is("textarea")||d.is("input")||b.preventDefault(),d.parent().is(".op-asset-dropdown-list-item:visible")&&d.parent().prev(".op-asset-dropdown-list-item:visible").length>0?d.removeClass("op-last-selected-asset-dropdown-list-item").parent().prev(".op-asset-dropdown-list-item").find("a").addClass("op-last-selected-asset-dropdown-list-item").focus():d.is("#op_assets_filter")?a(".op-asset-dropdown-list-item:visible").eq(0).find("a").focus():h());break;case 39:d.parent().is(".op-asset-list-item")||d.parent().is(".op-asset-dropdown-list-item")?d.trigger("click"):2!==e||d.is(".insert-media, a, input, textarea, select, .op-bsw-green-button")||a("#op_asset_browser_slide2").find(".op-asset-dropdown-list-item .selected").trigger("click");break;case 37:e>1&&(d.parent().hasClass("op-asset-dropdown-list-item")||!d.is(".insert-media, a, input, textarea, select, .op-bsw-green-button"))&&g(e-1,!0)}}),db.on("click","a.op-slide-link",function(b){b.preventDefault(),g(a(this).get_hash()),a(b.target).parent().parent().hasClass("op-settings-core-membership_order_button")&&a("#op_assets_core_membership_order_button_gateway").trigger("change")}),jb=db.find(".sneezing-panda").hide(),kb=jb.find(".content"),mb[3].add(mb[4]).delegate(".op-asset-dropdown .selected-item","click",function(b){b.preventDefault(),lb=a(this);var c=lb.closest(".op-asset-dropdown");for(var d in Eb)kb.removeClass(d),c.hasClass(d)&&kb.addClass(d);kb.html(lb.next().html()),jb.show().animate({bottom:0},400)}),jb.find(".hide-the-panda").click(function(a){a.preventDefault(),b()}),kb.delegate("li a","click",function(c){c.preventDefault();var d=a(this);"op_assets_core_button_button_preview_container"!=lb.parent().attr("id")&&"op_assets_core_optin_box_tabs_submit_button_button_preview_container"!=lb.parent().attr("id")&&"op_assets_core_optin_modal_tabs_submit_button_button_preview_container"!=lb.parent().attr("id")&&"op_assets_core_membership_order_button_button_preview_container"!=lb.parent().attr("id")&&"op_assets_core_op_popup_button_preview_container"!=lb.parent().attr("id")&&lb.html(d.html()).parent().find('li img[alt="'+d.find("img").attr("alt")+'"]').parent().trigger("click"),a("#op_asset_browser_slide3 .op-settings-"+Cb[0]+"-"+Cb[1]).trigger({type:"update_button_preview",id:lb.parent().attr("id"),value:d.find("img").attr("alt"),font_type:d.find("img").attr("data-type"),font_family:d.find("img").attr("data-family"),group:Cb[0],tag:Cb[1]}),b()}),a(document).mousedown(function(c){ib.hide().css({top:"auto",left:"auto"}),0==a(c.target).closest(".sneezing-panda").length&&b()}).trigger("mousedown"),mb[2].delegate(".op-disable-selected a","click",function(b){b.preventDefault(),a(this).closest(".op-asset-dropdown-list").find("a.selected").removeClass("selected").end().end().addClass("selected"),g(3)}),a("body").on("click",".wp-editor-wrap",function(){wpActiveEditor=a(this).find("textarea").attr("id")}),a("body").on("mousedown",".op-insert-buttons",function(){wpActiveEditor=OP.previousWpActiveEditor,OP.previousWpActiveEditor=void 0}),db.delegate(".op-multirow-tabs li a","click",function(b){b.preventDefault();var c=a(this),d=c.closest("ul"),e=d.parent(),f=d.find("li").index(c.parent());d.find("li").removeClass("selected").filter(":eq("+f+")").addClass("selected"),e.find("> .op-multirow").hide().filter(":eq("+f+")").show(),a(".field-feature_title").parent().show()}).delegate('a[href$="#reset-font"]',"click",function(b){var c=a(this).prev(),d=c.find(".font-view");c.find(":input").val("").trigger("change"),d.find(".selected-item").html(d.find("li:first a").html()),b.preventDefault()}),n=1;5>n;n++)qb.defaults.push(a("#op_asset_browser_slide"+n+" .help-vid-link").html());bb()});a.fn.get_hash=function(){return a.get_hash(this.attr("href"))},a.get_hash=function(a){return a=a.split("#"),a[1]},a.object_length=function(a){var b=0;for(var c in a)b++;return b},window.OP_AB={autop:op_wpautop,br2nl:$,column_width:W,edit_element:K,reset_form:o,insert_content:I,get_selector_value:S,nl2br:Z,open_dialog:Y,resize_content_areas:d,set_font_settings:U,set_selector_value:R,set_color_value:T,set_wysiwyg_content:Q,set_uploader_value:V,show_slide:g,get_active_slide:j,encode_html:cb,trigger_insert:function(){u(Cb[0],Cb[1])},translate:O,unautop:op_unautop,wysiwyg_content:P},a.expr[":"].icontains=function(b,c,d){return(b.textContent||b.innerText||a(b).text()||"").toLowerCase.indexOf(d[3].toLowerCase())>=0},a(document).on("update_button_preview",".op-settings-core-op_popup",function(a){return op_custom_popup.update(a),!1}),a(document).on("update_button_preview",".op-settings-core-button",function(a){return op_custom_button.update(a),!1}),a(document).on("update_button_preview",".op-settings-core-membership_order_button",function(a){return op_custom_membership_button.update(a),!1}),a(document).on("update_button_preview",".op-settings-core-optin_box",function(a){return op_custom_optin_button.update(a),!1}),a(document).on("update_button_preview",".op-settings-core-optin_modal",function(a){return op_custom_optin_button.update(a),!1})}(opjq);